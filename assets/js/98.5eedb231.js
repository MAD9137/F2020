(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{524:function(e,t,o){"use strict";o.r(t);var a=o(53),i=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"passing-data-back-to-a-view-controller"}},[e._v("Passing Data Back to A View Controller")]),e._v(" "),o("p",[e._v("As you have seen, you can pass the value of a variable from a viewController to a second viewController class through a segue.  However, passing values from a second view back to the first is a different story.")]),e._v(" "),o("p",[e._v("Passing data from a second view back to an initial viewController requires you to make and use your own custom "),o("strong",[e._v("Delegation Protocol")]),e._v(".  This protocol will be inherited by the first viewController class, requiring your first viewController class to write its own definition of the protocol function.  In your second viewController, you must instantiate an object of your Delegate Protocol (make a variable of your Protocol Delegate type).  This object's method will let the second viewController class call the function written in your first viewController, and pass in the data you want to pass as the function's parameter.  The first viewController's function is then able to set a value within the first viewController class.")]),e._v(" "),o("p",[e._v("For an example, let's look at the following project which has two views with their own viewController classes.  The first view on the left has a textLabel that displays “0”, and a button labeled “Edit Number” below.  The second view has a button labeled “Save New Number” with a slider below it.")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_01.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("p",[e._v("The first view has the textLabel hooked up as an outlet called "),o("code",[e._v("numberLabel")]),e._v(", and the button is connected to an action called "),o("code",[e._v("editButtonAction")]),e._v(".")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_02.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("p",[e._v("The second view has its button is connected to an action called "),o("code",[e._v("saveButtonAction")]),e._v(", and it’s slider connected to an outlet called "),o("code",[e._v("mySlider")]),e._v(".")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_03.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("h2",{attrs:{id:"defining-a-delegate-protocol"}},[e._v("Defining a Delegate Protocol")]),e._v(" "),o("p",[e._v("The next thing this project would need you to add is a new protocol that defines our custom delegate.  The first class will inherit from this protocol, so that it can be a delegate to pass a number from the second view back to the first.  The protocol needs to define the variable that the inheriting class will need to define its own copy of.  To do this, you will begin by creating a new Swift file in your solution by right-clicking (control+click) on project folder and select New File.")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_04.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("p",[e._v("After choosing Swift File as the type, the file should be named something appropriate like “Protocols” or something similar.  Then, you need to add a protocol that defines a function that will take the float value of the slider in the second view and pass it into the delegate function in the first view letting the first view have access to the value within that function.  This protocol can be defined in the following way:")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_05.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("h2",{attrs:{id:"first-view-inherits-from-the-delegate-protocol"}},[e._v("First View Inherits from the Delegate Protocol")]),e._v(" "),o("p",[e._v("Now that you have a new protocol, you want to make your first view be a delegate for that type of protocol.  You do this in your viewController's class definition where it inherits from UIViewController and adding a comma, and then adding your new numberPassingDelegate protocol after it.")]),e._v(" "),o("p",[e._v("After inheriting from this protocol you will see an error generated in your code.  This is warning you that you have not defined the protocol function that the delegate must define.  So you must add that as well.")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_06.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("p",[e._v("After inheriting from the protocol and defining the required function, you must add some code into the viewController's "),o("code",[e._v("prepare(for segue: UIStoryboardSegue, sender: Any?)")]),e._v(" method.  After checking if you are performing the correct segue, you must get an instance of the next viewController referring to it as a copy of your SecondViewController.  You must then set the first viewController as the delegate for the SecondViewController object before segueing to it.")]),e._v(" "),o("p",[e._v("You must also call "),o("code",[e._v("performSegueWithIdentifier")]),e._v(" in your button action, letting the button segue to the second view.  The final thing this class needs is to use the value when the second view passes it back to the first.  In this example, we will just use the float passed in to update the numberLabel outlet's text.")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_07.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("h2",{attrs:{id:"second-view-passing-data-to-first"}},[e._v("Second View Passing Data to First")]),e._v(" "),o("p",[e._v("The next thing you need to do is add an optional delegate object to the second view of the NumberPassingDelegate type you created.  This is required so that your first view can successfully set itself as the delegate for this class, and now that this object exists the connection will be successfully created in the prepare() function of the first view.")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_08.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("p",[e._v("Lastly, you need your second view's button action to call the "),o("code",[e._v("passNumberBack")]),e._v(" method from the delegate object, and pass in the value from the slider before ending this view.  The last thing you do in the action is dismissing the secondViewController by calling the dismiss function, which takes two parameters - the animated parameter is a boolean controlling whether or not the second view will be hidden with an animation or not.  The second parameter, "),o("code",[e._v("completion:")]),e._v(" takes a function passed in as a variable.  This completion function gets executed after the segue unwinds back to the first view.")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_09.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("p",[e._v("Now, when you run the application you will be able to click the button in the first view to transition to the second.  In the second, you can move the slider to any position and click the “Save New Number” button.  This will pass the float value back to the first view's delegate function which sets the textLabel in the first view before dismissing the second view.  Now, your first view has the value passed from the second.")]),e._v(" "),o("p",[o("img",{attrs:{src:"/F2020/assets/img/PassDataBack_10.png",alt:"Passing data back to a view controller"}})]),e._v(" "),o("p",[o("RouterLink",{attrs:{to:"/modules/week6/#during-class"}},[e._v("Back to Week 6")])],1)])}),[],!1,null,null,null);t.default=i.exports}}]);