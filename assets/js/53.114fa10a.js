(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{478:function(t,s,e){"use strict";e.r(s);var a=e(53),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"basic-http-access-authentication"}},[t._v("Basic HTTP Access Authentication")]),t._v(" "),e("p",[t._v("With modern RESTful web services, it is common for the server to be protected with some kind of network security (like the AAA process) that requires authentication to access the server contents.  This means the client application making the URL request must include the authentication information in the header of the URLRequest in order to gain access to the requested resource.")]),t._v(" "),e("p",[t._v("AAA server security process requires the server resources to do the following:")]),t._v(" "),e("ul",[e("li",[t._v("Authentication – Requires the user to identify using a login and password with encryption.")]),t._v(" "),e("li",[t._v("Authorization – Requires the user to have permission to access resources.")]),t._v(" "),e("li",[t._v("Accounting – Requires the server to record user actions.")])]),t._v(" "),e("p",[t._v("When building an application that requires server authentication, you are required to add a specific HTTP request header field in order to request access to the server’s information.  This lesson will teach you how to add custom header information into your URLRequest so you can authenticate with the server.  The header of your URLRequest must be modified after you create the URLRequest object, and before you use it to create the dataTask.")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v("This example is "),e("strong",[t._v("very")]),t._v(" basic, and only shows how to add content to the URLRequest header.  True authentication for different servers will require a unique, prescribed set of parameters set in the header which is designed by the developers of the server-side code.")])]),t._v(" "),e("p",[t._v("The following code is an example of making, and sending, a simple request to a server; similar to what you have seen in previous lessons.")]),t._v(" "),e("div",{staticClass:"language-swift line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-swift"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create a url set to the desired server address")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" myUrl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("string"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://lenczes.edumedia.ca/mad9137/httpAuthentication/authRespond.php"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create the request object passing it the url object")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myURLRequest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("URLRequest")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("URLRequest")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" myUrl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create the URLSession object that will be used to make the requests")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" mySession"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("URLSession")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("URLSession")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shared\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create a task from the session by passing in your request, and the callback handler")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" myTask "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mySession"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("dataTask")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" myURLRequest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" completionHandler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" requestTask "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Tell the task to run")]),t._v("\nmyTask"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resume")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")])]),e("p",[t._v("This pattern of code showed how to request a resource from some URL without authentication.  But in this case, this server script will return an error message due to the missing information i the URLRequest' header.  So, it is here in this code you need to add the custom information into the header to the URLRequest object.  The block of code below shows where, and how, to add a custom field into the header of the URLRequest object.")]),t._v(" "),e("div",{staticClass:"language-swift line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-swift"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create a url set to the desired server address ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" myUrl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("string"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://lenczes.edumedia.ca/mad9137/httpAuthentication/authRespond.php"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create the request object passing it the url object ")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myURLRequest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("URLRequest")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("URLRequest")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" myUrl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create authentication credentials as a string converted to utf8 encoded data ")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" authString "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"seb:myPassword"')]),t._v(" \n    \n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" utf8String "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" authString"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("using"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Encoding")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utf8"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Convert the unicode data to base 64 bit encoded string")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" base64String "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" utf8String"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("base64EncodedString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("init")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawValue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Add the header key "Authorization" with the value of "Basic:" added before our converted data')]),t._v("\n        myURLRequest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Basic_"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("  base64String"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forHTTPHeaderField"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-authentication"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create the URLSession object that will be used to make the requests")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" mySession"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("URLSession")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("URLSession")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shared \n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create a task from the session by passing in your request, and the callback handler ")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" myTask "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mySession"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("dataTask")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" myURLRequest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" completionHandler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" requestTask "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Tell the task to run ")]),t._v("\n    myTask"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resume")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br"),e("span",{staticClass:"line-number"},[t._v("27")]),e("br"),e("span",{staticClass:"line-number"},[t._v("28")]),e("br")])]),e("p",[t._v("Any text can be used for the field name and the value; it is the server developer's choice of what header field names and values to check for.  Your application must send the URLRequest with the required header field and value added to it in order for the server to send the correct response data back to your code.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v('When the header field "my-authentication" is sent to the server it will be found in the $'),e("em",[t._v("SERVER[\"HTTP_MY_AUTHENTICATION\"] variable in the PHP script.  The name is automatically converted by the server to all capitol letters, with '-' changed to '")]),t._v('\' and "HTTP_" added to the front.')])]),t._v(" "),e("p",[t._v("Header resources are stored as field "),e("strong",[t._v("keys")]),t._v(" with an associated "),e("strong",[t._v("value")]),t._v(".  The name of the HTTP header field required by this specific server script is called “my-authentication”, and it's value must be “Basic_c2ViOm15UGFzc3dvcmQ=”.")]),t._v(" "),e("p",[t._v('This value comes from the string “seb:myPassword” converted to data, and then converted to a base 64 bit string, which will convert the text to “c2ViOm15UGFzc3dvcmQ=”.  That converted string then has the text "Basic_" added to the front of it.  The developer of the server script chose the format of the value that is required by the client application in order to successfully authenticate the request.')]),t._v(" "),e("p",[t._v("In the example project provided in this lesson, you will also see how the PHP server script is looking for the specific custom request header field which controls access to the data.  If you try to access the server script without adding the correct field, and value to the header you will get the the PHP script's error message as a response.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v("URLRequest header fields are defined as a custom key-value pair of strings in the header of the request object.  This is done using the URLRequest.addValue(“”, forHTTPHeaderField: “”) where the first parameter is the value, and the second is the field key name.")])]),t._v(" "),e("p",[t._v("You can "),e("a",{attrs:{href:"/F2020/assets/downloads/HttpAuthentication.zip"}},[t._v("download the example iOS project here")]),t._v(", and you can choose to "),e("a",{attrs:{href:"/F2020/assets/downloads/HttpAuthenticationServer.zip"}},[t._v("download the php server script")]),t._v(" that works with this example if you want to try to run this example in wamp or mamp.")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/modules/week12/#during-class"}},[t._v("Back to Week 12")])],1)])}),[],!1,null,null,null);s.default=n.exports}}]);